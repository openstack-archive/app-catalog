---
  $schema: http://json-schema.org/draft-04/schema#
  type: object
  required: 
    - images
  properties: 
    applications: 
      type: array
      items: 
        type: object
        required:
          - name
          - provided_by
          - description
          - disk_format
          - container_format
          #- license #FIXME add license as a requirement going forward. Make required once the repo has them populated.
        additionalProperties: true
        properties: 
          name: 
            type: string
          provided_by: 
            type: object
            required: 
              - name
              - href
              - company
            additionalProperties: false
            properties: 
              name: 
                type: string
              href: 
                type: string
                pattern: "^((https?://)[a-z][a-z0-9_-]+(\\.[a-z][a-z0-9_-]+)+(/[a-z0-9\\._/~%\\-\\+&\\#\\?!=\\(\\)@]*)?)|(mailto:[a-z][a-z0-9._-]+@[a-z][a-z0-9_-]+(\\.[a-z][a-z0-9_-]+)+)$"
              company: 
                type: string
          description: 
            type: string
          format: 
            enum: 
              - QCOW2
              - VMDK
          container_format:
            enum:
              - ami
              - ari
              - aki
              - bare
              - ovf
          disk_format:
            enum:
              - ami
              - ari
              - aki
              - vhd
              - vmdk
              - raw
              - qcow2
              - vdi
              - iso
          min_ram:
            type: number
          min_disk:
            type: number
          license:
            type: string
            pattern: "^(GPL .*)|(Apache .*)|(BSD .*)|(MIT)|(Free <= [0-9]+ Users)|(Other)|(Unknown)$"
          license_url:
            type: string
            pattern: "^((https?://)[a-z][a-z0-9_-]+(\\.[a-z][a-z0-9_-]+)+(/[a-z0-9\\._/~%\\-\\+&\\#\\?!=\\(\\)@]*)?)$"
          attributes: 
            type: object
            additionalProperties: true
            patternProperties: 
              .*: 
                type: 
                  - string
                  - number
